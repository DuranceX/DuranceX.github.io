---
title: çƒŸè‰ä»“å‚¨ç®¡ç†ç³»ç»Ÿå¼€å‘ç¬”è®°ï¼ˆä¸‰ï¼‰
date: 2022-04-15 21:00:00
tags: å®‰å“
---
# IconFontå­—ä½“çš„å¯¼å…¥
## æ­£å¸¸ä½¿ç”¨
[å‚è€ƒå†…å®¹](https://www.jianshu.com/p/e39b1d506a82)
ç”±æ­¤æœ¬æ¬¡é¡¹ç›®ä¸­åº”è¯¥ä¼šå¤šå¤„ä½¿ç”¨åˆ°IconFontå­—ä½“ï¼Œä»¥åŠæ›´å€¾å‘äºåœ¨xmlæ–‡ä»¶ä¸­ç›´æ¥è®¾ç½®IconFontå›¾æ ‡ï¼Œè€Œä¸æ˜¯åœ¨Javaä»£ç ä¸­è¿›è¡Œè®¾ç½®ï¼Œå› æ­¤é‡‡ç”¨çš„æ˜¯è‡ªå®šä¹‰ç±»çš„æ–¹å¼ã€‚

é¦–å…ˆåœ¨IconFontç½‘ç«™ä¸ŠæŒ‘é€‰å¥½éœ€è¦çš„å›¾æ ‡ï¼Œå¹¶æ·»åŠ åˆ°é¡¹ç›®ï¼Œç„¶åè¿›å…¥åˆ°é¡¹ç›®æ–‡ä»¶ä¸­å°†å†…å®¹ä¸‹è½½åˆ°æœ¬åœ°ã€‚ä¸‹è½½å¾—åˆ°ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹åå¯ä»¥å¾—åˆ°ä¸€ä¸ªttfåç¼€çš„æ–‡ä»¶ï¼Œå°†å…¶å¯¼å…¥åˆ°Android Studioçš„assetsæ–‡ä»¶å¤¹ä¸­ï¼Œassetsæ–‡ä»¶å¤¹é»˜è®¤æ²¡æœ‰åˆ›å»ºï¼Œéœ€è¦æ‰‹åŠ¨æ–°å»ºï¼Œæ–‡ä»¶å¤¹è·Ÿjavaå’Œresä½äºåŒä¸€å±‚çº§ã€‚ä¹‹ååœ¨assetsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºiconfontæ–‡ä»¶å¤¹ï¼Œå°†ttfæ–‡ä»¶å¯¼å…¥åˆ°å…¶ä¸­ã€‚
![](https://images.starnight.top/img/20220415210907.png)

ç„¶åæ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»IconFontTextViewï¼Œç»§æ‰¿è‡ªAppCompatTextViewï¼Œé‡å†™å…¶ä¸­çš„æ„é€ æ–¹æ³•ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­è°ƒç”¨ä¸€ä¸ªè‡ªå·±æ–°å»ºçš„æ–¹æ³•ï¼Œæ–°å»ºçš„æ–¹æ³•é€šè¿‡è°ƒç”¨Typefaceæ¥æ¸²æŸ“å­—ä½“ã€‚å…·ä½“ä»£ç å¦‚ä¸‹
```java
public class IconFontTextView extends AppCompatTextView {  
    public IconFontTextView(@NonNull Context context) {  
        super(context);  
        Init(context);  
    }  
  
    public IconFontTextView(@NonNull Context context, @Nullable AttributeSet attrs) {  
        super(context, attrs);  
        Init(context);  
    }  
  
    public IconFontTextView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) {  
        super(context, attrs, defStyleAttr);  
        Init(context);  
    }  
  
    public void Init(Context context){  
        Typeface icon = Typeface.createFromAsset(context.getAssets(),"iconfont/iconfont.ttf");  
        setTypeface(icon);  
    }  
}
```
ä¹‹ååœ¨éœ€è¦ä½¿ç”¨IconFontå›¾æ ‡çš„æ—¶å€™ï¼Œå°†é»˜è®¤çš„TextViewæ”¹æˆè‡ªå®šä¹‰çš„IconFontTextViewï¼Œå¹¶åœ¨å…¶ä¸­å¡«å†™IconFontä»£ç å³å¯ã€‚
## èœå•ä¸­ä½¿ç”¨
ä¹‹å‰æƒ³ç€å°†æŠ½å±‰èœå•ä¸­çš„å›¾æ ‡ä¹Ÿç”¨IconFontå›¾æ ‡è¿›è¡Œæ›¿æ¢ï¼Œä½†æ˜¯èœå•ä¸­çš„æ–‡æœ¬åªæ˜¯`<Item>`æ ‡ç­¾ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨`<TextView>`æ ‡ç­¾ï¼Œè‡ªç„¶æ— æ³•ç”¨è‡ªå®šä¹‰çš„IconFontTextViewæ¥æ›¿æ¢äº†ï¼Œå› æ­¤è¡Œä¸é€šï¼Œæœ€ååªèƒ½å°†å›¾æ ‡ä¸€ä¸ªä¸ªä»¥svgçš„å½¢å¼ä¸‹è½½ä¸‹æ¥ï¼Œå†ä»æœ¬åœ°æ–‡ä»¶ä¸­å¯¼å…¥åˆ°Android Studioä¸­ï¼Œé€šè¿‡Iconå±æ€§ï¼Œå°†å›¾æ ‡è®¾ç½®åˆ°èœå•ä¸­ã€‚
![](https://images.starnight.top/img/20220415211533.png)

# å®¢æˆ·ä¿¡æ¯ç•Œé¢å®ç°
## åŸºæœ¬æ¡†æ¶è®¾è®¡
æ€»ä½“æƒ³çš„ä»¥ç®€æ´çš„ä¿¡æ¯å±•ç¤ºä¸ºä¸»ï¼Œå¤§è‡´ç»“æ„å¸ƒå±€å¦‚ä¸‹
![](https://images.starnight.top/img/20220415212231.png)
å…¶ä¸­çš„Headerå—å†…å®¹å¾ˆç®€å•ï¼Œä¸ºä¸€ä¸ªèœå•ä¸­å¯¹åº”çš„IconFontå›¾æ ‡å’Œå¯¹åº”çš„é¡µé¢åç§°ï¼Œé€šè¿‡ä¸­è‹±æ–‡çš„æ­é…ä½¿æ•´ä½“æ›´ç¾è§‚ä¸€ç‚¹ã€‚
![](https://images.starnight.top/img/20220415213048.png)

## Itemè®¾è®¡å®ç°
å…¶ä¸­Iteméƒ¨åˆ†è®¾è®¡ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦ä¾§ä¸ºä¸€ä¸ªImageViewï¼Œè®¾æƒ³æ˜¯æ·»åŠ å®¢æˆ·çš„Logoï¼Œå³ä¾§åˆ™æ˜¯å‚ç›´æ–¹å‘çš„ä¸‰è¡Œæ–‡æœ¬æ¡†ï¼Œç”¨äºæ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯ã€‚æ¯ä¸ªItemè®¾å®šä¸ºåœ†è§’çŸ©å½¢ï¼Œè¿™ä¸€å—åŸæœ¬æƒ³ä½¿ç”¨[ShadowLayout](https://github.com/lihangleo2/ShadowLayout)æ¥å®ç°ï¼Œä½†åœ¨ä½¿ç”¨æ—¶å‡ºç°äº†ä¸€äº›å…¼å®¹æ€§é—®é¢˜[^ShadowLayout]ï¼Œå¯¼è‡´ç¼–è¯‘æ— æ³•é€šè¿‡ï¼Œæ‰€ä»¥æ”¹ä¸ºä½¿ç”¨ä¸Šç¯‡ä¸­æåˆ°çš„[RWidgetHelper](https://github.com/RuffianZhong/RWidgetHelper)æ¥å®ç°ï¼Œæœ€ç»ˆItemçš„å‘ˆç°ç»“æœå¦‚ä¸‹ï¼š
![](https://images.starnight.top/img/20220415212837.png)

## SearchBarå®ç°
åœ¨ä¹‹å‰é‡æ–°å­¦ä¹ æ—¶åšçš„ä¸€ä¸ªå•è¯æœ¬Demoï¼Œé‚£é‡Œä½¿ç”¨åˆ°çš„æœç´¢æŒ‰é’®è‡ªå¸¦åŠ¨ç”»ï¼Œç‚¹å‡»å¯ä»¥ä¼¸å¼€æœç´¢æ¡†å¡«æ»¡æ•´ä¸ªæ ‡é¢˜æ ï¼Œè¿™é‡Œæ„Ÿè§‰å¾ˆé€‚åˆã€‚å› æ­¤å°è¯•äº†ä¸€ä¸‹ï¼Œå°†ä¸€ä¸ªToolbarç»„ä»¶æ‹–è‡³RecycleViewä¸Šæ–¹ï¼Œå°†é•¿åº¦ä¸RecycleViewå¯¹é½ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªSearchViewï¼Œå³å®ç°äº†æƒ³è¦çš„æ•ˆæœï¼Œä½†å…¶é»˜è®¤çš„æœç´¢å›¾æ ‡æ˜¾ç¤ºåœ¨å·¦ä¾§ï¼Œä¸”æœç´¢æ¡†å‘å³å±•å¼€ã€‚ä½†å› ä¸ºæˆ‘è¿˜éœ€è¦æ”¾ç½®ä¸€ä¸ªâ€æ·»åŠ â€æŒ‰é’®ï¼Œé‚£ä¹ˆéƒ½æ”¾å·¦è¾¹æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œä¸€å·¦ä¸€å³å°±æ›´å¥‡æ€ªäº†ã€‚äºæ˜¯å°±æ˜¯ç½‘ä¸ŠæŸ¥äº†æŸ¥æ€ä¹ˆå°†å›¾æ ‡æ”¾åˆ°å³ä¾§ï¼Œå‘ç°å¯ä»¥ä½¿ç”¨`layout_gravity=right`å±æ€§æ¥å°†å…¶ç§»åŠ¨åˆ°å³ä¾§ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ•ˆæœï¼Œåœ¨ä»”ç»†æ¯”å¯¹äº†ä»£ç åæ‰å‘ç°ï¼Œæˆ‘è¿™é‡Œçš„SearchViewä½¿ç”¨çš„æ˜¯`match_parents`ï¼Œæ‰€ä»¥æ˜¯å¡«æ»¡æ•´ä¸ªToolbarçš„ï¼Œå°†å…¶æ”¹æˆ`wrap_content`å³å¯ğŸ˜‚

ç„¶ååœ¨Toolbarç»„ä»¶ä¸­å†ä½¿ç”¨IconFontTextViewç»„ä»¶æ·»åŠ ä¸€ä¸ªâ€œ+â€çš„ç¬¦å·ï¼Œå³å®Œæˆäº†Searchbarçš„æ•ˆæœã€‚
![](https://images.starnight.top/img/20220415213808.png)

## Adapterå®ç°
æœ‰äº†å‡ ä¸ªLayoutæ–‡ä»¶åä¾¿æ˜¯åˆ›å»ºAdapterï¼Œè¿™é‡Œä½¿ç”¨çš„ä¹Ÿæ˜¯ç¬¬ä¸‰æ–¹åº“[BaseRecyclerViewAdapterHelper](https://github.com/CymChad/BaseRecyclerViewAdapterHelper) ï¼Œè™½ç„¶æš‚æ—¶ä¹Ÿæ²¡ç”¨ä¸Šå…¶ç‰¹å®šåŠŸèƒ½ï¼Œä½†åæ­£éƒ½æ˜¯è¦ç”¨è¿™ä¸ªçš„ï¼Œå°±å…ˆä»¥å…¶ä¸ºæ¡†æ¶ï¼Œä»¥åæ›´åŠ æ–¹ä¾¿æ·»åŠ åŠ¨ç”»ç­‰æ•ˆæœã€‚åœ¨Adapterä¸­åˆ›å»ºè‡ªå®šä¹‰çš„ViewHolderå¹¶ç»§æ‰¿BaseViewHolderï¼Œåœ¨å…¶ä¸­å®šä¹‰è§†å›¾ä¸­çš„ç»„ä»¶ï¼Œç„¶åå°†æ³›å‹ä¸­çš„ä¸¤ä¸ªå‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œå‰è€…ä¸ºå®ä¾‹å¯¹è±¡ï¼Œå³æ•°æ®æºï¼Œåè€…ä¸ºè‡ªå®šä¹‰çš„ViewHolderï¼Œå³è§†å›¾ï¼Œå¹¶é‡å†™å…¶æ–¹æ³•ã€‚
```java
public class CustomerListAdapter extends BaseQuickAdapter<CustomerTest, MyCustomerViewHolder> {  
    public CustomerListAdapter(int layoutResId) {  
        super(layoutResId);  
    }  
  
    @Override  
    protected void convert(@NonNull MyCustomerViewHolder holder, CustomerTest customer) {  
        holder.name.setText(customer.getName());  
        holder.address.setText(customer.getAddress());  
        holder.purchase.setText(Arrays.toString(customer.getMainPurchase()).replace('[',' ').replace(']',' '));  
    }  
}  
  
class MyCustomerViewHolder extends BaseViewHolder{  
    TextView name,address,purchase;  
    public MyCustomerViewHolder(@NonNull View view) {  
        super(view);  
        name = view.findViewById(R.id.customerName);  
        address = view.findViewById(R.id.customerAddress);  
        purchase = view.findViewById(R.id.customerMainPurchase);  
    }  
}
```
æ ¹æ®æ–‡æ¡£æ‰€è¯´ï¼Œåœ¨é‡å†™çš„convertæ–¹æ³•ä¸­è¿›è¡Œç»„ä»¶å†…å®¹çš„èµ‹å€¼ã€‚
## Fragmentä¸­ä½¿ç”¨
é¦–å…ˆåœ¨Fragmentä¸­åˆ›å»ºRecycleViewå’Œè‡ªå®šä¹‰Adapterçš„å¯¹è±¡ï¼Œä¹‹åé€šè¿‡adapterçš„`setNewInstance`æ–¹æ³•ä¸ºadapterèµ‹å€¼ï¼Œå†å°†adapterç»‘å®šåˆ°RecycleViewä¸Šã€‚
```java
@Override  
public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {  
    super.onViewCreated(view, savedInstanceState);  
    adapter = new CustomerListAdapter(R.layout.item_customer_information);  
    adapter.setAnimationEnable(true);  
    recyclerView = getView().findViewById(R.id.customerRecycleview);  
    recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));  
    recyclerView.setAdapter(adapter);  
	//è·å–listæ•°æ®
	//è®¾å®šadapteræ•°æ®
    adapter.setNewInstance(newList);   
}
```
å¾—åˆ°å¦‚ä¸‹çš„æœ€ç»ˆæ˜¾ç¤ºç»“æœï¼š
![](https://images.starnight.top/img/20220415215610.png)

## æ·»åŠ ç‚¹å‡»äº‹ä»¶
æ¥ä¸‹æ¥ä¸ºæ·»åŠ æŒ‰é’®å’Œåˆ—è¡¨Itemæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œå¼¹å‡ºä¸€ä¸ªåº•éƒ¨å¯¹è¯æ¡†ç”¨äºæ·»åŠ /ä¿®æ”¹ä¿¡æ¯ï¼Œå½“æ˜¯ç‚¹å‡»æ·»åŠ æŒ‰é’®å¼¹å‡ºå¯¹è¯æ¡†æ—¶ï¼Œåˆ™æ•°æ®å…¨ä¸ºç©ºï¼Œå½“ç‚¹å‡»åˆ—è¡¨Itemå¼¹å‡ºå¯¹è¯æ¡†æ—¶ï¼Œé»˜è®¤æ•°æ®ä¸ºå½“å‰ç‚¹å‡»çš„Itemçš„æ•°æ®ï¼Œå¯è¿›è¡Œä¿®æ”¹ã€‚
å¯¹è¯æ¡†ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“[DialogX](https://github.com/kongzue/DialogX) å®ç°ï¼Œé‡‡ç”¨å…¶è‡ªå®šä¹‰è§†å›¾çš„åº•éƒ¨å¯¹è¯æ¡†è¿›è¡Œå®ç°ï¼Œæ•ˆæœå›¾å¦‚ä¸‹
![](https://images.starnight.top/img/20220415215914.png)

ä¸çŸ¥ä¸ºä½•ï¼Œè¿™é‡Œçš„å¸ƒå±€ä¼šè¿›è¡Œå‹ç¼©ï¼Œæ­¤å¤–åœ¨è®¾è®¡å¸ƒå±€æ–‡ä»¶æ—¶ä¹Ÿä¼šå‡ºç°è®¾ç½®ä¸º`wrap_content`æ—¶ï¼Œåº•ä¸‹ä»ä¼šæµå‡ºå¾ˆå¤§ä¸€å—ç©ºç™½çš„æƒ…å†µï¼Œå°±åƒæ˜¯å›ºå®šäº†é«˜åº¦ä¸€æ ·ï¼Œä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œå› æ­¤è¿™ä¸ªå¸ƒå±€åªæ˜¯ä¸ªåŠæˆå“ï¼Œå¾…ä¿®æ”¹å®Œååœ¨ä¸‹ç¯‡å†™ã€‚

# é‡åˆ°çš„é—®é¢˜
## ShadowLayoutä¸­çš„å…¼å®¹æ€§é—®é¢˜

[^ShadowLayout]:  **ShadowLayoutå…¼å®¹æ€§é—®é¢˜**

åœ¨å…¼å®¹æ€§æŠ¥é”™ä¸­ï¼Œå…¶æç¤ºShadowLayoutä½¿ç”¨äº†supportåº“ï¼Œè€Œè¿™å’ŒAndroidXå†²çªï¼Œè€Œä¸”æˆ‘è¿™é‡Œçš„è®¾å®šä¹Ÿç¡®å®æ˜¯`useAndroidX=true`ï¼Œå› æ­¤æˆ‘ä»¥ä¸ºShadowLayoutä¸æ”¯æŒAndroidXï¼Œä½†æˆ‘è¿˜æ˜¯å‘äº†[Issue](https://github.com/lihangleo2/ShadowLayout/issues/140)æé—®äº†ä¸€ä¸‹ï¼Œåœ¨å¼€å‘è€…çš„å‘ŠçŸ¥ä¸‹æ‰çŸ¥é“ï¼Œå…‰æœ‰`useAndroidX=true`å¹¶ä¸æ˜¯å¼€å¯äº†AndroidXï¼Œè¿˜éœ€è¦åœ¨`gradle.properties`ä¸­æ·»åŠ `android.enableJetifier=true`æ‰ç®—æ”¯æŒAndroidXï¼Œå³åœ¨`gradle.properties`ä¸­æ·»åŠ 
```java
android.useAndroidX=true  
android.enableJetifier=true
```
æ‰ç®—å¼€å¯AndroidX

çœ‹æ˜¯å¦éœ€è¦å°†RWidgetHelperçš„é‚£ä¸ªå¸ƒå±€æ”¹æˆShadowLayoutï¼Œæ¯•ç«ŸShadowLayoutçš„é˜´å½±å¯è°ƒå±æ€§æ›´å¤šï¼Œæ›´å¥½çœ‹ã€‚