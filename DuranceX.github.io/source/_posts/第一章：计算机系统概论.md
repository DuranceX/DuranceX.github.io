---
title: '第一章：计算机系统概论'
date: 2020-02-24 14:16:42
tags: [计算机组成原理, 笔记]
categories: 计算机组成原理
index_img: /img/计算机组成原理/header.png
math: true
---
计算机组成原理——第一章：计算机系统概论笔记
包括冯·诺依曼结构和计算机系统性能评价两大块内容

<!-- more -->


# 冯·诺依曼结构

## 一、 工作原理

- 存储程序
- 程序控制

## 二、计算机组成

1. 硬件系统
   1. 主机:CPU（运算器+控制器）、内存
        - 算术运算：加减乘除等
        - 逻辑运算：与或非等
        - 基本结构：算术逻辑运算单元（ALU）、计算用累加器、保存结果用寄存器
      - 控制器：<a href="#update">更新</a>
        - 基本功能：控制指令的执行，依据指令产生控制信号（电平信号、脉冲信号）
        - 产生控制信号的依据：指令、状态、时序
        - 产生方式：微程序、硬布线
        ![](/img/计算机组成原理/控制器.png)
      - 存储器：
        - 基本结构：地址总线、存储体、数据总线
        - 功能：存储原程序、原数据和运算中间结构
        - 工作模式：读/写
        - 工作原理：按地址访问、读/写数据
          ![](/img/计算机组成原理/存储器.png)
          | 容量  | 地址线数量 |
          | :---: | :--------: |
          |  1k   |     10     |
          |  1M   |     20     |
          |  1G   |     30     |

          > 例题：访问2Gb容量的空间，需要的地址线数量为？
          因为2¹=2，所以数量为30+1=31根
          *2^30^=1GB，表示有2^30^个地址，但2Gb时2^30^个地址不够用（1字节一个地址），所以需要2^31^个地址*

    &emsp;&emsp;CPU执行一条指令通常存在两个过程，分别是取指阶段和执行阶段，在取指阶段访问存储器读取指令，执行阶段访问存储器读取数据，所以虽然指令和数据都是二进制表示，但CPU能够加以区分。
   2. 外设：输入设备、输出设备、外存储器
   3. 总线：
   - 能为系统中多个部件<font color="red">分时 共享</font>的一组 ==信息传输线== 及 ==相关逻辑==
      - 共享：总线所连的各部件通过它来传递信息。
      - 分时：某一时刻只允许一个部件向总线发送信息。
         >就所有部件都通过总线来传送信息，若可以同时传输信息的话，假如A部件需要传输一个高电平信号，部件B传输一个低电平信号，那么就无法判断到底是高点平信号还是低电平信号。

         ![总线示意](/img/计算机组成原理/总线示意.png)
      如何实现分时传输信号呢？在数字电路中通过三态门来进行这一操作。
      ![三态门](/img/计算机组成原理/三态门.png)
      三态门通过"输出使能"来使这一路获得除高低外的第三态——高阻态，即阻值巨大相当于断路。
      这样在硬件不使用时，通过输出使能让该路形成“伪断路”，不向总线传输信息，在使用时，让该路恢复，正常传输信息
   - 总线的分类：
     总线信号可以分成三组：
     - <font color="orange">地址总线AB</font>：传送<font color="blue">地址</font>信息
       - 输出将要访问的内存单元或I/O端口的地址
       - 地址线的多少决定了系统能够直接使用的最大的存储容量
         <p class="note note-primary">一般为单向，由CPU输出</p>
     - <font color="orange">数据总线DB</font>：传送<font color="blue">数据</font>信息
       - CPU读操作时，外部数据通过数据总线送往CPU
       - CPU写操作时，CPU数据通过数据总线送外外部
       - 数据线的多少决定了一次能够传送数据的位数
         <p class="note note-primary">双向，即可由CPU向外也可由外向CPU</p>
      - <font color="orange">控制总线CB</font>：传送<font color="blue">控制</font>信息
        - 包括CPU送出的控制信号和主存或外设给CPU的反馈信号（双向）
      - 此外总线还包括电源、地线等其他辅助信号。
2. 软件系统
   - 表现形式：程序和数据
   - 核心：算法
3. 软/硬件关系
   1. 相互依存
   2. 逻辑等效性：某些功能可以由硬件实现，也可以由软件实现
   3. 协同发展

## 三、计算机层次结构
计算机层次结构从上到下依次为：

   应用程序|
   :-:|
   高级语言|
   汇编语言|
   操作系统|
   指令集架构层|
   微代码层|
   硬件逻辑层|

&emsp;&emsp;在计算机的层次结构中，上下层是可以分割的，仅有下层而没有上层是可行的。上层是下层的功能实现，上层在下层的基础上实现更丰富的功能。


# 计算机系统性能评价

## 一、非时间指标

1. 机器字长：指机器一次能处理的二进制位数
2. 总线宽度：数据总线一次能并行传送的最大信息位数
3. 主存容量：指一台计算机主存所包含的存储单元总数
4. 存储带宽：指单位时间内与主存交换的二进制信息量

## 二、时间指标

1. 主频 $f$ / 时间周期 $T$ ，外频，倍频
   - 主频f:指CPU内核工作的时钟频率，即CPU内数字脉冲信号振荡的速率
   - 时钟周期T:计算机中最基本最小的时间单位，是CPU中两个功能部件之间传递信息所需要的最短时间
      >在一个时钟周期内，CPU仅能完成一个最基本的动作
   - 外频：指CPU与主板之间同步的时钟频率
   - 倍频：CPU主频与外频之间的倍数
   - 主频=外频 * 倍频
      >例：奔腾4 2.4GCPU
      >主频2400M = 133M（外频）x  18（倍频）

2. CPI(Clock cycle Per Instruction)
   - 指执行一条指令平均需要的时钟周期数
   - 计算方法
     - CPI=程序中所有指令的时钟周期之和/程序中指令总数
          =∑(程序中各类指令的CPI x 程序中该指令的比例)
      >例：
      >|     指令类型      |  CPI  | 指令比例 |
      >| :---------------: | :---: | :------: |
      >|    算术和逻辑     |   1   |   60%    |
      >|    Load/Store     |   2   |   18%    |
      >|       转移        |   4   |   12%    |
      >| Cache缺失访存​​​​ |   8   |   10%    |

      >CPI=1\*60%+2\*18%+4\*12%+8\*10%=2.24​​

3. MIPS(Million Instructions Per Second)
   - 每秒钟CPU能执行的指令条数（单位：百万条/秒）
   - 计算方法
     - 主频/(CPI $*$ 10<sup>6</sup>)(全性能公式)
       CPI不变时，主频率越高，运行速度就越快。

     >例:
     某计算机主频为1GHz，总指令数为2*10^5，比例如下
     >|     指令类型      |  CPI  | 指令比例 |
     >| :---------------: | :---: | :------: |
     >|    算术和逻辑     |   1   |   60%    |
     >|    Load/Store     |   2   |   18%    |
     >|       转移        |   4   |   12%    |
     >| Cache缺失访存​​​​ |   8   |   10%    |

     >MIPS=$f$/(CPI*10<sup>6</sup>)=​​446.4

4. CPU时间
   - 执行一段程序所需的时间：CPU时间+I/O时间+存储访问时间+各类排队时延等
   - 计算方法：
     - 程序中所有指令的时钟周期数之和$*$$T$
     - 程序中所有指令的时钟周期数之和$/$$f$
     - 总指令数\*CPI*T
     - 指令数量/(MIPS*10<sup>6</sup>)

     >例:
     某计算机主频为1GHz，总指令数为2*10^5，比例如下
     >|     指令类型      |  CPI  | 指令比例 |
     >| :---------------: | :---: | :------: |
     >|    算术和逻辑     |   1   |   60%    |
     >|    Load/Store     |   2   |   18%    |
     >|       转移        |   4   |   12%    |
     >| Cache缺失访存​​​​ |   8   |   10%    |

     >一：基于CPI
      CPU时间=2*10^5^\*CPI$/$$f$=（2\*10<sup>5</sup>\*2.24/10<sup>9</sup>)=4.48\*10<sup>-4</sup>(秒)
      二：基于MIPS
      CPU时间​​​=2\*10<sup>5</sup>/(MIPS\*10^6^)=4.48\*10<sup>-4</sup>(秒)​​​​    

<hr />
<h1 id="update">更新内容</h1>

## 控制器详解
![](/img/计算机组成原理/控制器详解.png)


